@page
@using HotelManagementSystem
@using HotelManagementSystem.Controllers.Account
@namespace HotelManagementSystem.Pages
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model ForgotPasswordController
@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - HotelManagementSystem</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/HotelManagementSystem.styles.css" asp-append-version="true" />
    <link href="~/css/site.css" rel="stylesheet" />
</head>
<body>
    <div class="container">
        <div class="row" style="margin-top: 100px">
            <div class="col-md-2"></div>
            <div class="col-md-10">

                @if (ViewBag.Step == null)
                {
                    <div class="login-container">
                        <h1 style="font-size: 40px; text-align: center; padding-top: 75px" class="bold-text">Forgot Password</h1>
                        <h5 class="bold-text" style=" text-align: center; font-size: 16px">You need to enter your email and click Get OTP</h5>
                        <form style="padding: 0px 70px; text-align: center;" method="post" asp-page-handler="FindAccount">
                            <div class="mb-3" style="margin-top: 50px; text-align: left">
                                <label class="bold-text">EMAIL</label>
                                <input type="text" class="form-control" placeholder="Enter your email" name="email" value="@ViewBag.Email" required>
                            </div>
                            @if (ViewBag.ErrorMSG != null)
                            {
                                <h5 class="bold-text" style="color: red; font-size: 16px">@ViewBag.ErrorMSG</h5>
                            }
                            <button type="submit" class="btn btn-primary btn-large-round" style="margin-top: 35px; border-radius: 50px; font-size: 20px; font-weight: bold; width: 200px;">Get OTP</button>
                            <br>
                            <a href="/Accounts/Login" style="font-weight: bold;" class="forgot-password">Back to Login</a>
                        </form>
                    </div>
                }

                @if (ViewBag.Step == "VerifyOTP")
                {
                    <div class="login-container">
                        <h1 style="font-size: 40px; text-align: center; padding-top: 75px" class="bold-text">Verify OTP</h1>
                        <h5 class="bold-text" style=" text-align: center; font-size: 16px">Check your email and paste your OTP here</h5>
                        <form style="padding: 0px 70px; text-align: center;" method="post" asp-page-handler="VerifyOTP">
                            <div class="mb-3" style="margin-top: 50px; text-align: left">
                                <label class="bold-text">ENTER OTP</label>
                                <input type="text" class="form-control" placeholder="Enter received OTP" name="otp" value="@ViewBag.OTP" required>
                            </div>
                            @if (ViewBag.ErrorMSG != null)
                            {
                                <h5 class="bold-text" style="color: red; font-size: 16px">@ViewBag.ErrorMSG</h5>
                            }
                            <button type="submit" class="btn btn-primary btn-large-round" style="margin-top: 50px; border-radius: 50px; font-size: 20px; font-weight: bold; width: 200px;">Verify</button>
                            <br>
                            <a href="/Accounts/Login" style="font-weight: bold;" class="forgot-password">Back to Login</a>
                        </form>
                    </div>
                }

                @if (ViewBag.Step == "ChangePassword")
                {
                    <div class="login-container">
                        <h1 style="font-size: 40px; text-align: center; padding-top: 75px" class="bold-text">Change Password</h1>
                        <h5 class="bold-text" style=" text-align: center; font-size: 16px">Enter your new password to finish</h5>
                        <form style="padding: 0px 70px; text-align: center;" method="post" asp-page-handler="ChangePassword">
                            <div class="mb-3" style="margin-top: 50px; text-align: left">
                                <label class="bold-text">NEW PASSWORD</label>
                                <input type="password" class="form-control" placeholder="Enter new password" name="password" value="@ViewBag.OTP" required>
                            </div>
                            <div class="mb-3" style="margin-top: 20px; text-align: left">
                                <label class="bold-text">CONFIRM NEW PASSWORD</label>
                                <input type="password" class="form-control" placeholder="Enter confirm new password" name="confirmPassword" value="@ViewBag.OTP" required>
                            </div>
                            @if (ViewBag.ErrorMSG != null)
                            {
                                <h5 class="bold-text" style="color: red; font-size: 16px">@ViewBag.ErrorMSG</h5>
                            }
                            <button type="submit" class="btn btn-primary btn-large-round" style="margin-top: 50px; border-radius: 50px; font-size: 20px; font-weight: bold; width: 200px;">Save Password</button>
                            <br>
                            <a href="/Accounts/Login" style="font-weight: bold;" class="forgot-password">Back to Login</a>
                        </form>
                    </div>
                }
            </div>
            <div class="col-md-2"></div>
        </div>
    </div>
</body>
</html>